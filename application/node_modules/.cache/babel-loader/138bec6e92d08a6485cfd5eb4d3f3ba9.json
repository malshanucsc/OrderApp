{"ast":null,"code":"import _toConsumableArray from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/malshanw/Documents/ColaProjects/orderapp/application/src/components/orderDetailView.component.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nvar config = require('../config.json');\n\nvar OrderDetailView =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(OrderDetailView, _Component);\n\n  function OrderDetailView(props) {\n    var _this;\n\n    _classCallCheck(this, OrderDetailView);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(OrderDetailView).call(this, props));\n\n    _this.onChangeOrderName = function (e) {\n      _this.setState({\n        order_name: e.target.value\n      });\n    };\n\n    _this.onChangeOrderName = _this.onChangeOrderName.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeQuantity = _this.onChangeQuantity.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeUnitValue = _this.onChangeUnitValue.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeCustomerName = _this.onChangeCustomerName.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeAddress = _this.onChangeAddress.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addItem = _this.addItem.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.alertAndTimeout = _this.alertAndTimeout.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      order_name: _this.props.order.order_name,\n      item_name: '',\n      address: _this.props.order.address,\n      customer_name: _this.props.order.customer_name,\n      grand_total: 0.00,\n      quantity: 0.0,\n      unit_value: 0.0,\n      subtot: 0.0,\n      item_set: _this.props.order.items,\n      item_number: 0,\n      new_item_obj: {},\n      user_data: _this.props.user_data,\n      alert_type: \"\",\n      alert_message: \"\",\n      alerting: false\n    };\n    return _this;\n  } //on change input handlers\n\n\n  _createClass(OrderDetailView, [{\n    key: \"onChangeItemName\",\n    value: function onChangeItemName(e, item) {\n      var itemArray = _toConsumableArray(this.state.item_set); // make a separate copy of the array\n\n\n      var index = itemArray.indexOf(item);\n\n      if (index !== -1) {\n        itemArray.splice(index, 1);\n        this.setState({\n          item_set: itemArray\n        });\n      }\n    }\n  }, {\n    key: \"onChangeQuantity\",\n    value: function onChangeQuantity(e) {\n      var _this2 = this;\n\n      this.setState({\n        quantity: e.target.value\n      }, function () {\n        return _this2.setState({\n          subtot: _this2.state.unit_value * _this2.state.quantity\n        });\n      });\n    }\n  }, {\n    key: \"onChangeUnitValue\",\n    value: function onChangeUnitValue(e) {\n      var _this3 = this;\n\n      this.setState({\n        unit_value: e.target.value,\n        subtot: this.state.unit_value * this.state.quantity\n      }, function () {\n        return _this3.setState({\n          subtot: _this3.state.unit_value * _this3.state.quantity\n        });\n      });\n    }\n  }, {\n    key: \"onChangeSubTot\",\n    value: function onChangeSubTot(e) {\n      this.setState({\n        subtot: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeCustomerName\",\n    value: function onChangeCustomerName(e) {\n      this.setState({\n        customer_name: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeAddress\",\n    value: function onChangeAddress(e) {\n      this.setState({\n        address: e.target.value\n      });\n    } //adding items to item list\n\n  }, {\n    key: \"addItem\",\n    value: function addItem() {\n      var _this4 = this;\n\n      var new_item_obj = {\n        item_name: this.state.item_name,\n        quantity: this.state.quantity,\n        unit_value: this.state.unit_value,\n        subtot: this.state.subtot\n      };\n      this.setState({\n        item_number: this.state.item_number + 1,\n        item_set: this.state.item_set.concat(new_item_obj),\n        grand_total: this.state.grand_total + this.state.subtot,\n        item_name: '',\n        quantity: 0.0,\n        unit_value: 0.0,\n        subtot: 0.0\n      }, function () {\n        return console.log(_this4.state.item_set);\n      });\n    } //removing item\n\n  }, {\n    key: \"removeItem\",\n    value: function removeItem(item) {\n      var itemArray = _toConsumableArray(this.state.item_set); // make a separate copy of the array\n\n\n      var index = itemArray.indexOf(item);\n\n      if (index !== -1) {\n        itemArray.splice(index, 1);\n        this.setState({\n          item_set: itemArray,\n          grand_total: this.state.grand_total - item.subtot\n        });\n      } // this.setState({\n      //   item_number : this.state.item_number+1,\n      //   item_set : this.state.item_set.concat(new_item_obj),\n      //   grand_total:this.state.grand_total+this.state.subtot,\n      //   item_name : '',\n      //   quantity : 0.0,\n      //   unit_value : 0.0,\n      //   subtot : 0.0\n      // });   \n\n    }\n  }, {\n    key: \"onChangeGstNumber\",\n    value: function onChangeGstNumber(e) {\n      this.setState({\n        business_gst_number: e.target.value\n      });\n    } //alerting function\n\n  }, {\n    key: \"alertAndTimeout\",\n    value: function alertAndTimeout(type, message) {\n      var _this5 = this;\n\n      this.setState({\n        alerting: true,\n        alert_type: type,\n        alert_message: message\n      }, function () {\n        return setTimeout(function () {\n          this.setState({\n            alerting: false,\n            alert_type: \"\",\n            alert_message: \"\"\n          });\n        }.bind(_this5), 5000);\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var grandtot = 0.00;\n      this.state.item_set.map(function (item) {\n        grandtot += item.subtot;\n      });\n      this.setState({\n        grand_total: grandtot\n      });\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      var _this6 = this;\n\n      e.preventDefault();\n      var obj = {\n        order_name: this.state.order_name,\n        items: this.state.item_set,\n        grand_total: this.state.grand_total,\n        customer_name: this.state.customer_name,\n        address: this.state.address\n      };\n      var id = this.props.order._id;\n\n      if (this.state.user_data === null) {\n        this.props.history.push('/login');\n      } else {\n        var access_token = this.state.user_data.orderapp_user_token;\n        var UpdateOrder = {\n          method: 'post',\n          headers: {\n            Authorization: \"Bearer \" + access_token\n          },\n          data: [obj, id],\n          url: config.ServerAddress + '/order/update'\n        };\n        axios(UpdateOrder).then(function (response) {\n          if (response.data.message === \"sessionExpired\") {\n            _this6.props.handleLogout();\n\n            _this6.props.history.push('/login');\n          } else {\n            if (response.data.message === \"order_update_successfull\") {\n              _this6.setState({\n                customer_name: response.data.order.customer_name,\n                order_name: response.data.order.order_name,\n                item_set: response.data.order.items,\n                address: response.data.order.address,\n                grand_total: response.data.order.grand_total\n              }, function () {\n                return _this6.alertAndTimeout(\"success\", \"Order Updated Succefully !\");\n              });\n            } else if (response.data === \"order_update_fail\") {\n              _this6.alertAndTimeout(\"danger\", \"Update Failed !\");\n            } else if (response.data === \"order_not_found\") {\n              _this6.alertAndTimeout(\"danger\", \"Order Not Found !\");\n            }\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      console.log(this.state.item_set);\n\n      if (this.state.user_data === null || this.state.user_data === undefined) {\n        this.props.history.push('/login');\n      }\n\n      var successful_alert = React.createElement(\"div\", {\n        className: \"row \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"alert alert-\" + this.state.alert_type,\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, this.state.alert_message)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }));\n      return React.createElement(\"div\", {\n        style: {\n          marginTop: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, this.state.alerting && this.state.alert_type && successful_alert, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, \"Update Order\"), React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"Order Name:  \"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.order_name,\n        onChange: this.onChangeOrderName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"Items:\"), React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        className: \"col-l-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"td\", {\n        className: \"col-l-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, \"Quantity\"), React.createElement(\"td\", {\n        className: \"col-l-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, \"Unit Price $\"), React.createElement(\"td\", {\n        className: \"col-l-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, \"Sub Total\"), React.createElement(\"td\", {\n        className: \"col-l-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, this.state.item_set.map(function (item) {\n        return React.createElement(\"tr\", {\n          key: item._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          name: \"name-\".concat(_this7.props.index),\n          value: item.item_name,\n          onChange: _this7.onChangeItemName.bind(_this7, item),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258\n          },\n          __self: this\n        })), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"number\",\n          className: \"form-control\",\n          name: \"quantity-\".concat(_this7.props.index),\n          value: item.quantity,\n          onChange: _this7.onChangeQuantity,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        })), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"number\",\n          className: \"form-control\",\n          name: \"unitvalue-\".concat(_this7.props.index),\n          value: item.unit_value,\n          onChange: _this7.onChangeUnitValue,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        })), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          name: \"subtot-\".concat(_this7.props.index),\n          readOnly: true,\n          value: item.subtot,\n          onChange: _this7.onChangeSubTot,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 267\n          },\n          __self: this\n        })), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"button\",\n          className: \"close\",\n          onClick: _this7.removeItem.bind(_this7, item),\n          \"aria-label\": \"Close\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          \"aria-hidden\": \"true\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271\n          },\n          __self: this\n        }, \"\\xD7\"))));\n      }), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      })), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        name: \"name-\".concat(this.props.index),\n        value: this.state.item_name,\n        onChange: this.onChangeItemName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        name: \"quantity-\".concat(this.props.index),\n        value: this.state.quantity,\n        onChange: this.onChangeQuantity,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        name: \"unitvalue-\".concat(this.props.index),\n        value: this.state.unit_value,\n        onChange: this.onChangeUnitValue,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        name: \"subtot-\".concat(this.props.index),\n        readOnly: true,\n        value: this.state.subtot,\n        onChange: this.onChangeSubTot,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-success\",\n        onClick: this.addItem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, \"Add\")))))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, \"Total\"), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, this.state.grand_total)), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, \"Customer Name: \"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.customer_name,\n        onChange: this.onChangeCustomerName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, \"Address: \"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.address,\n        onChange: this.onChangeAddress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Update Order\",\n        className: \" btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return OrderDetailView;\n}(Component);\n\nexport { OrderDetailView as default };","map":{"version":3,"sources":["/home/malshanw/Documents/ColaProjects/orderapp/application/src/components/orderDetailView.component.jsx"],"names":["React","Component","axios","config","require","OrderDetailView","props","onChangeOrderName","e","setState","order_name","target","value","bind","onChangeQuantity","onChangeUnitValue","onChangeCustomerName","onChangeAddress","addItem","alertAndTimeout","onSubmit","state","order","item_name","address","customer_name","grand_total","quantity","unit_value","subtot","item_set","items","item_number","new_item_obj","user_data","alert_type","alert_message","alerting","item","itemArray","index","indexOf","splice","concat","console","log","business_gst_number","type","message","setTimeout","grandtot","map","preventDefault","obj","id","_id","history","push","access_token","orderapp_user_token","UpdateOrder","method","headers","Authorization","data","url","ServerAddress","then","response","handleLogout","catch","error","undefined","successful_alert","marginTop","onChangeItemName","onChangeSubTot","removeItem"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nconst config = require('../config.json');\n\nexport default class OrderDetailView extends Component {\n  constructor(props) {\n    super(props);\n    \n    this.onChangeOrderName = this.onChangeOrderName.bind(this);\n    \n    this.onChangeQuantity = this.onChangeQuantity.bind(this);\n    this.onChangeUnitValue = this.onChangeUnitValue.bind(this);\n    this.onChangeCustomerName = this.onChangeCustomerName.bind(this);\n    this.onChangeAddress = this.onChangeAddress.bind(this);\n    this.addItem = this.addItem.bind(this);\n    this.alertAndTimeout = this.alertAndTimeout.bind(this);  \n    this.onSubmit = this.onSubmit.bind(this);\n\n    this.state = {\n      order_name: this.props.order.order_name,\n      item_name: '',\n      address:this.props.order.address,\n      customer_name:this.props.order.customer_name,\n      grand_total:0.00,\n      quantity:0.0,\n      unit_value:0.0,\n      subtot:0.0,\n      item_set:this.props.order.items,\n      item_number:0,\n      new_item_obj:{},\n      user_data : this.props.user_data,\n      alert_type:\"\",\n      alert_message:\"\",\n      alerting : false\n    }\n  }\n\n  //on change input handlers\n  onChangeOrderName = (e)=> {\n    this.setState({order_name: e.target.value});\n  };\n  onChangeItemName(e,item) {\n\n    let itemArray = [...this.state.item_set]; // make a separate copy of the array\n    let index = itemArray.indexOf(item)\n    \n    if (index !== -1) {\n      itemArray.splice(index, 1);\n      this.setState({ item_set: itemArray});\n    }\n  \n  }\n  onChangeQuantity(e) {  \n    this.setState({quantity: e.target.value,},()=>this.setState({\n      subtot:this.state.unit_value * this.state.quantity\n    }));\n  }\n  onChangeUnitValue(e) {\n    this.setState({\n      unit_value: e.target.value,\n      subtot:this.state.unit_value * this.state.quantity\n    },()=>this.setState({\n      subtot:this.state.unit_value * this.state.quantity\n    }));\n  }\n  onChangeSubTot(e) {\n    this.setState({subtot: e.target.value});\n  }\n  onChangeCustomerName(e) {\n    this.setState({customer_name: e.target.value});\n  }\n  onChangeAddress(e){\n    this.setState({ address:e.target.value});\n  }\n\n  //adding items to item list\n  addItem(){\n    \n    const new_item_obj={\n      item_name:this.state.item_name,\n      quantity:this.state.quantity,\n      unit_value:this.state.unit_value,\n      subtot:this.state.subtot\n    };\n    this.setState({\n      item_number : this.state.item_number+1,\n      item_set : this.state.item_set.concat(new_item_obj),\n      grand_total:this.state.grand_total+this.state.subtot,\n      item_name : '',\n      quantity : 0.0,\n      unit_value : 0.0,\n      subtot : 0.0\n    },()=>console.log(this.state.item_set));   \n  }\n\n  //removing item\n  removeItem(item){\n    \n\n    let itemArray = [...this.state.item_set]; // make a separate copy of the array\n    let index = itemArray.indexOf(item)\n    \n  if (index !== -1) {\n    itemArray.splice(index, 1);\n    this.setState({\n      item_set: itemArray,\n      grand_total : this.state.grand_total-item.subtot\n    });\n  }\n  \n    \n    // this.setState({\n    //   item_number : this.state.item_number+1,\n    //   item_set : this.state.item_set.concat(new_item_obj),\n    //   grand_total:this.state.grand_total+this.state.subtot,\n    //   item_name : '',\n    //   quantity : 0.0,\n    //   unit_value : 0.0,\n    //   subtot : 0.0\n    // });   \n  }\n\n  onChangeGstNumber(e) {\n    this.setState({business_gst_number: e.target.value});\n  }\n\n  //alerting function\n  alertAndTimeout(type,message){\n\n    this.setState({\n      alerting : true,\n      alert_type:type,\n      alert_message:message\n    },()=>setTimeout(\n      function() {\n          this.setState({\n            alerting: false,\n            alert_type:\"\",\n            alert_message:\"\"\n          });\n      }\n      .bind(this),\n      5000\n    ));\n  }\n\n  componentDidMount(){\n    let grandtot = 0.00;\n    this.state.item_set.map((item)=>\n    {grandtot+=item.subtot});\n    this.setState({grand_total:grandtot});\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const obj = {\n      order_name: this.state.order_name,\n      items: this.state.item_set,\n      grand_total: this.state.grand_total,\n      customer_name : this.state.customer_name,\n      address : this.state.address\n    };\n    let id = this.props.order._id;\n    \n    if(this.state.user_data===null){\n\n      this.props.history.push('/login');\n    \n    }else{\n      const access_token = this.state.user_data.orderapp_user_token;\n      const UpdateOrder = {\n        method: 'post',\n        headers: { Authorization: \"Bearer \" + access_token },\n        data:[obj,id],\n        url:config.ServerAddress+'/order/update',\n      };\n\n      axios(UpdateOrder).then(response => {\n        if(response.data.message===\"sessionExpired\"){\n          this.props.handleLogout(); \n          this.props.history.push('/login');\n\n        }else{\n          if(response.data.message===\"order_update_successfull\"){\n\n            this.setState({\n              customer_name: response.data.order.customer_name,\n              order_name: response.data.order.order_name,\n              item_set: response.data.order.items,\n              address:response.data.order.address,\n              grand_total:response.data.order.grand_total\n            },()=>this.alertAndTimeout(\"success\",\"Order Updated Succefully !\"));\n\n          }else if(response.data===\"order_update_fail\"){\n\n            this.alertAndTimeout(\"danger\",\"Update Failed !\");\n\n          }else if(response.data===\"order_not_found\"){\n\n            this.alertAndTimeout(\"danger\",\"Order Not Found !\");\n\n          }\n\n        }   \n      }).catch(function (error) {\n        console.log(error);\n      })\n    }\n\n  }\n \n  render() {\n    console.log(this.state.item_set)\n    \n    if(this.state.user_data===null || this.state.user_data===undefined){\n      this.props.history.push('/login');\n    }\n\n    var successful_alert = \n      <div className=\"row \">\n        <div className=\"col-sm\"></div>\n        <div className=\"col-sm\">\n          <div className={\"alert alert-\"+this.state.alert_type} role=\"alert\">\n            {this.state.alert_message}\n          </div>\n        </div>\n        <div className=\"col-sm\"></div>\n      </div>\n    \n    return (\n      \n        <div style={{ marginTop: 10 }}>\n          {this.state.alerting && this.state.alert_type && successful_alert}\n          <h3>Update Order</h3>\n          <form onSubmit={this.onSubmit}>\n            <div className=\"form-group\">\n              <label>Order Name:  </label>\n                <input type=\"text\" className=\"form-control\" value={this.state.order_name} onChange={this.onChangeOrderName}  />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Items:</label>\n                <table>\n                  <thead>\n                  <tr>\n                    <td className=\"col-l-2\">Name</td>\n                    <td className=\"col-l-2\">Quantity</td>\n                    <td className=\"col-l-2\">Unit Price $</td>\n                    <td className=\"col-l-2\">Sub Total</td>\n                    <td className=\"col-l-2\"></td>\n                    </tr>\n                  </thead>\n                  <tbody>\n                  {this.state.item_set.map((item)=>\n                  <tr key={item._id}>\n                    <td>\n                      <input type=\"text\" className=\"form-control\" name={ `name-${ this.props.index }` } value={item.item_name} onChange={this.onChangeItemName.bind(this,item)} />\n                    </td>\n                    <td>\n                      <input type=\"number\" className=\"form-control\" name={ `quantity-${ this.props.index }` } value={item.quantity} onChange={this.onChangeQuantity} />\n                    </td>\n                    <td>\n                      <input type=\"number\" className=\"form-control\" name={ `unitvalue-${ this.props.index }` } value={item.unit_value} onChange={this.onChangeUnitValue} />\n                    </td>\n                    <td>\n                      <input type=\"text\" className=\"form-control\" name={ `subtot-${ this.props.index }` } readOnly value={item.subtot} onChange={this.onChangeSubTot}/>\n                    </td>\n                    <td>\n                      <button type=\"button\" className=\"close\" onClick={this.removeItem.bind(this,item)} aria-label=\"Close\">\n                        <span aria-hidden=\"true\">&times;</span>\n                      </button>\n                    </td>\n                  </tr>)}\n\n                  <tr>\n                    <td></td>\n                  </tr>\n                  <tr>\n                    <td>\n                      <input type=\"text\" className=\"form-control\" name={ `name-${ this.props.index }` } value={this.state.item_name} onChange={this.onChangeItemName} />\n                    </td>\n                    <td>\n                      <input type=\"number\" className=\"form-control\" name={ `quantity-${ this.props.index }` } value={this.state.quantity} onChange={this.onChangeQuantity} />\n                    </td>\n                    <td>\n                      <input type=\"number\" className=\"form-control\" name={ `unitvalue-${ this.props.index }` } value={this.state.unit_value} onChange={this.onChangeUnitValue} />\n                    </td>\n                    <td>\n                      <input type=\"text\" className=\"form-control\" name={ `subtot-${ this.props.index }` } readOnly value={this.state.subtot} onChange={this.onChangeSubTot}/>\n                    </td>\n                    <td>\n                      <button type=\"button\" className=\"btn btn-success\" onClick={this.addItem} >Add</button>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n            <div className=\"form-group\">\n              <h3>Total</h3>\n              <label>{this.state.grand_total}</label>\n            </div>\n\n            <div className=\"form-group\">\n              <label>Customer Name: </label>\n              <input type=\"text\" className=\"form-control\" value={this.state.customer_name} onChange={this.onChangeCustomerName} />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Address: </label>\n              <input type=\"text\" className=\"form-control\" value={this.state.address} onChange={this.onChangeAddress} />\n            </div>\n                \n            <div className=\"form-group\">\n              <input type=\"submit\" value=\"Update Order\" className=\" btn btn-primary\"/>\n            </div>\n          </form>\n        </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}