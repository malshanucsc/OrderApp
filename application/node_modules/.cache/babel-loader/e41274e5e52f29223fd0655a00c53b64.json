{"ast":null,"code":"import _classCallCheck from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/malshanw/Documents/ColaProjects/orderapp/application/src/components/login.component.jsx\";\nimport React, { Component } from 'react';\nimport { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport axios from 'axios';\n\nvar config = require('../config.json');\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n    _this.state = {\n      username: '',\n      register: 'loggin',\n      password1: '',\n      password2: '',\n      redirectIndex: false,\n      submitted: false,\n      invalid_login: false,\n      user_data: undefined\n    };\n    _this.handleRegister = _this.handleRegister.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleUserName = _this.handleUserName.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePassword1 = _this.handlePassword1.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePassword2 = _this.handlePassword2.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    localStorage.removeItem(\"user_data\");\n    return _this;\n  } //handlers\n\n\n  _createClass(Login, [{\n    key: \"handleUserName\",\n    value: function handleUserName(e) {\n      this.setState({\n        username: e.target.value\n      });\n    }\n  }, {\n    key: \"handlePassword1\",\n    value: function handlePassword1(e) {\n      this.setState({\n        password1: e.target.value\n      });\n    }\n  }, {\n    key: \"handlePassword2\",\n    value: function handlePassword2(e) {\n      this.setState({\n        password2: e.target.value\n      });\n    }\n  }, {\n    key: \"handleRegister\",\n    value: function handleRegister(registerValue) {\n      var _this2 = this;\n\n      this.setState({\n        register: registerValue\n      }, function () {\n        return console.log(_this2.state.register);\n      });\n    } //submit function\n\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      this.setState({\n        submitted: true\n      });\n      var obj = {\n        username: this.state.username,\n        password: this.state.password1\n      };\n\n      if (this.state.register === 'registering') {\n        if (this.state.username && this.state.password1) {\n          axios.post(config.ServerAddress + '/user/register', obj).then(function (res) {\n            return console.log(res.data);\n          });\n        }\n      } else if (this.state.register === 'loggin') if (this.state.username && this.state.password1) {\n        axios.post(config.ServerAddress + '/user/authenticate', obj).then(function (res) {\n          if (res.data.message === \"invalid\") {\n            _this3.setState({\n              invalid_login: true\n            });\n          } else {\n            _this3.setState({\n              invalid_login: false,\n              user_data: res.data\n            }, function () {\n              return localStorage.setItem('user_data', JSON.stringify(_this3.state.user_data));\n            });\n\n            _this3.props.handleLogin();\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      //this part is kept for temporary\n      // if(this.state.user_data!==undefined){\n      //   this.props.history.push('/');\n      // }\n      var passwordNotMatched = true;\n      var regButtonDisabled = false;\n\n      if (this.state.password1 === this.state.password2 && this.state.password1 !== '') {\n        passwordNotMatched = false;\n      }\n\n      if (this.state.username === '') {\n        regButtonDisabled = true;\n      }\n\n      var logginButton = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        className: \"fadeIn fourth login_submit_buttons\",\n        value: \"Log In\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }));\n      var logginFooter = React.createElement(\"div\", {\n        id: \"formFooter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: '',\n        onClick: function onClick() {\n          return _this4.handleRegister('registering');\n        },\n        className: \"nav-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Need an account ? \"));\n      var registerSection = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"password\",\n        className: \"fadeIn third logininputs\",\n        name: \"login\",\n        placeholder: \"Retype Password\",\n        value: this.state.password2,\n        onChange: this.handlePassword2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }), passwordNotMatched && React.createElement(\"div\", {\n        className: \"help-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Two password are not the same\"), React.createElement(\"input\", {\n        disabled: regButtonDisabled,\n        type: \"submit\",\n        className: \"fadeIn fourth\",\n        value: \"Register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }));\n      var registerfooter = React.createElement(\"div\", {\n        id: \"formFooter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: '',\n        onClick: function onClick() {\n          return _this4.handleRegister('loggin');\n        },\n        className: \"nav-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Log In \"));\n      return React.createElement(\"div\", {\n        className: \"wrapper fadeInDown \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"formContent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"Login\"), React.createElement(\"div\", {\n        className: \"fadeIn first\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, this.state.invalid_login && React.createElement(\"div\", {\n        className: \"help-block text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"Username or Password Incorrect\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"fadeIn second logininputs\",\n        name: \"login\",\n        value: this.state.username,\n        onChange: this.handleUserName,\n        placeholder: \"Username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }), this.state.submitted && !this.state.username && React.createElement(\"span\", {\n        className: \"help-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Username is required\"), React.createElement(\"input\", {\n        type: \"password\",\n        className: \"fadeIn third logininputs\",\n        name: \"login\",\n        placeholder: \"Password\",\n        value: this.state.password1,\n        onChange: this.handlePassword1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), this.state.submitted && !this.state.password1 && React.createElement(\"div\", {\n        className: \"help-block\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Password is required\"), this.state.register === 'loggin' ? logginButton : this.state.register === 'registering' ? registerSection : ''), console.log(this.state.register), this.state.register === 'loggin' ? logginFooter : this.state.register === 'registering' ? registerfooter : ''));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport { Login as default };","map":{"version":3,"sources":["/home/malshanw/Documents/ColaProjects/orderapp/application/src/components/login.component.jsx"],"names":["React","Component","BrowserRouter","Router","Switch","Route","Link","axios","config","require","Login","props","state","username","register","password1","password2","redirectIndex","submitted","invalid_login","user_data","undefined","handleRegister","bind","handleUserName","handlePassword1","handlePassword2","handleSubmit","localStorage","removeItem","e","setState","target","value","registerValue","console","log","preventDefault","obj","password","post","ServerAddress","then","res","data","message","setItem","JSON","stringify","handleLogin","passwordNotMatched","regButtonDisabled","logginButton","logginFooter","registerSection","registerfooter"],"mappings":"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","sourcesContent":["import React, { Component} from 'react';\nimport { BrowserRouter as  Router, Switch, Route, Link } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport axios from 'axios';\nconst config = require('../config.json');\n\n\n\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    \n  \n\n    this.state = {\n        username: '',\n        register:'loggin',\n        password1: '',\n        password2:'',\n        redirectIndex:false,\n        submitted: false,\n        invalid_login:false,\n        user_data:undefined\n    };\n\n    this.handleRegister = this.handleRegister.bind(this);\n    this.handleUserName = this.handleUserName.bind(this);\n    this.handlePassword1 = this.handlePassword1.bind(this);\n    \n    \n\n    this.handlePassword2 = this.handlePassword2.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    \n    \n\n    localStorage.removeItem(\"user_data\");\n}\n\n//handlers\n\nhandleUserName(e) {\n  \n  this.setState({ username: e.target.value });\n}\n\nhandlePassword1(e) {\n  \n  this.setState({ password1: e.target.value });\n}\nhandlePassword2(e) {\n  \n  this.setState({ password2: e.target.value });\n}\nhandleRegister(registerValue){\n  \n  \n  \n  this.setState({register:registerValue},()=>console.log(this.state.register));\n  \n}\n\n\n//submit function\nhandleSubmit(e) {\n  e.preventDefault();\n\n  this.setState({ submitted: true });\n\n  \n  \n  const obj={ username:this.state.username,\n              password:this.state.password1 };\n\n  if(this.state.register==='registering'){\n    if (this.state.username && this.state.password1) {\n      axios.post(config.ServerAddress+'/user/register', obj)\n          .then(res => console.log(res.data));\n  \n        \n    }\n    \n  }else if(this.state.register==='loggin')\n  if (this.state.username && this.state.password1) {\n    axios.post(config.ServerAddress+'/user/authenticate', obj)\n    \n        \n        \n        .then(res=> {if(res.data.message===\"invalid\"){\n          this.setState({\n            invalid_login:true\n          });\n\n\n        }else{\n          \n          \n          this.setState({invalid_login:false,user_data:res.data},()=>localStorage.setItem('user_data',JSON.stringify(this.state.user_data)));\n          \n          this.props.handleLogin();\n\n        }\n    \n    });\n\n  }\n}\n\n\n\n\n\n  render() {\n    \n    //this part is kept for temporary\n    // if(this.state.user_data!==undefined){\n      \n      \n    //   this.props.history.push('/');\n    // }\n      \n    \n    \n    \n    \n    var passwordNotMatched=true;\n    \n    var regButtonDisabled=false;\n    if((this.state.password1===this.state.password2) && this.state.password1!==''){\n      passwordNotMatched=false;\n    }\n\n    if(this.state.username===''){\n      regButtonDisabled=true;\n\n    }\n    \n    \n    var logginButton = \n        <div>\n          <input type=\"submit\" className=\"fadeIn fourth login_submit_buttons\" value=\"Log In\"/>\n        </div>;\n\n    \n\n    var logginFooter = \n        <div id=\"formFooter\">\n          <Link to={''} onClick={()=>this.handleRegister('registering')} className=\"nav-link\" >Need an account ? </Link>\n        </div>\n\n    var registerSection = \n        <div>\n          <input type=\"password\"  className=\"fadeIn third logininputs\" name=\"login\" placeholder=\"Retype Password\" value={this.state.password2} onChange={this.handlePassword2}/>\n          {passwordNotMatched &&\n                            <div className=\"help-block\">Two password are not the same</div>\n                        }\n          \n          <input disabled={regButtonDisabled} type=\"submit\" className=\"fadeIn fourth\" value=\"Register\"/>\n        </div>\n\n    var registerfooter = \n        <div id=\"formFooter\">\n          <Link to={''} onClick={()=>this.handleRegister('loggin')} className=\"nav-link\" >Log In </Link>\n        </div>\n\n    \n\n    return (\n      \n      \n      \n      <div className=\"wrapper fadeInDown \">\n      \n      <div id=\"formContent\">\n      <h1 className=\"\">Login</h1>\n      <div className=\"fadeIn first\">\n      \n    </div>\n    <form  onSubmit={this.handleSubmit}>\n\n    {/* invalid login */}\n    {\n      this.state.invalid_login &&\n                            <div className=\"help-block text-danger\">Username or Password Incorrect</div>\n    }\n    \n    \n    \n    <input type=\"text\" className=\"fadeIn second logininputs\" name=\"login\"  value={this.state.username} onChange={this.handleUserName} placeholder=\"Username\"/>\n    {/* if no username is inserted */}\n    {this.state.submitted && !this.state.username &&\n                            <span className=\"help-block\">Username is required</span>\n    }\n    \n    \n    \n    <input type=\"password\" className=\"fadeIn third logininputs\" name=\"login\" placeholder=\"Password\" value={this.state.password1} onChange={this.handlePassword1}/>\n    {/*if password is not inserted  */}\n    {this.state.submitted && !this.state.password1 &&\n                            <div className=\"help-block\">Password is required</div>\n    }\n\n      \n    \n    {this.state.register==='loggin'?logginButton:this.state.register==='registering'?registerSection:''}\n\n      \n    </form>\n    {\n      console.log(this.state.register)\n    }\n\n    {this.state.register==='loggin'?logginFooter:this.state.register==='registering'?registerfooter:''}\n\n      </div>\n      </div>\n      \n      \n   \n    \n\n   \n    \n\n    \n   \n\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}