{"ast":null,"code":"import _toConsumableArray from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/malshanw/Documents/ColaProjects/orderapp/application/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/malshanw/Documents/ColaProjects/orderapp/application/src/components/orderDetailView.component.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nvar config = require('../config.json');\n\nvar OrderDetailView =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(OrderDetailView, _Component);\n\n  function OrderDetailView(props) {\n    var _this;\n\n    _classCallCheck(this, OrderDetailView);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(OrderDetailView).call(this, props));\n\n    _this.onChangeOrderName = function (e) {\n      _this.setState({\n        order_name: e.target.value\n      });\n    };\n\n    _this.onChangeOrderName = _this.onChangeOrderName.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeItemName = _this.onChangeItemName.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeQuantity = _this.onChangeQuantity.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeUnitValue = _this.onChangeUnitValue.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeCustomerName = _this.onChangeCustomerName.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeAddress = _this.onChangeAddress.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addItem = _this.addItem.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.alertAndTimeout = _this.alertAndTimeout.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      order_name: _this.props.order.order_name,\n      item_name: '',\n      address: _this.props.order.address,\n      customer_name: _this.props.order.customer_name,\n      grand_total: 0.00,\n      quantity: 0.0,\n      unit_value: 0.0,\n      subtot: 0.0,\n      item_set: _this.props.order.items,\n      item_number: 0,\n      new_item_obj: {},\n      user_data: _this.props.user_data,\n      alert_type: \"\",\n      alert_message: \"\",\n      alerting: false\n    };\n    return _this;\n  }\n\n  _createClass(OrderDetailView, [{\n    key: \"calculateGrandTotal\",\n    value: function calculateGrandTotal() {\n      var temporyGrandTot = 0.0;\n\n      for (var i = 0; i < this.state.item_set.length; i++) {\n        temporyGrandTot += this.state.item_set[i].subtot;\n      }\n\n      this.setState({\n        grand_total: temporyGrandTot\n      });\n    } //on change input handlers\n\n  }, {\n    key: \"onChangeExistItemName\",\n    value: function onChangeExistItemName(item, e) {\n      var itemArray = _toConsumableArray(this.state.item_set); // make a separate copy of the array\n\n\n      var index = itemArray.indexOf(item);\n\n      if (index !== -1) {\n        itemArray[index].item_name = e.target.value;\n        this.setState({\n          item_set: itemArray\n        });\n      }\n    }\n  }, {\n    key: \"onChangeItemName\",\n    value: function onChangeItemName(e) {\n      this.setState({\n        item_name: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeQuantity\",\n    value: function onChangeQuantity(e) {\n      var _this2 = this;\n\n      this.setState({\n        quantity: e.target.value\n      }, function () {\n        return _this2.setState({\n          subtot: _this2.state.unit_value * _this2.state.quantity\n        });\n      });\n    }\n  }, {\n    key: \"onChangeExistQuantity\",\n    value: function onChangeExistQuantity(item, e) {\n      var _this3 = this;\n\n      var itemArray = _toConsumableArray(this.state.item_set); // make a separate copy of the array\n\n\n      var index = itemArray.indexOf(item);\n\n      if (index !== -1) {\n        itemArray[index].quantity = e.target.value;\n        itemArray[index].subtot = itemArray[index].quantity * itemArray[index].unit_value;\n        this.setState({\n          item_set: itemArray\n        }, function () {\n          return _this3.calculateGrandTotal();\n        });\n      }\n    }\n  }, {\n    key: \"onChangeUnitValue\",\n    value: function onChangeUnitValue(e) {\n      var _this4 = this;\n\n      this.setState({\n        unit_value: e.target.value,\n        subtot: this.state.unit_value * this.state.quantity\n      }, function () {\n        return _this4.setState({\n          subtot: _this4.state.unit_value * _this4.state.quantity\n        });\n      });\n    }\n  }, {\n    key: \"onChangeExistUnitValue\",\n    value: function onChangeExistUnitValue(item, e) {\n      var _this5 = this;\n\n      var itemArray = _toConsumableArray(this.state.item_set); // make a separate copy of the array\n\n\n      var index = itemArray.indexOf(item);\n\n      if (index !== -1) {\n        itemArray[index].unit_value = e.target.value;\n        itemArray[index].subtot = itemArray[index].quantity * itemArray[index].unit_value;\n        this.setState({\n          item_set: itemArray\n        }, function () {\n          return _this5.calculateGrandTotal();\n        });\n      }\n    }\n  }, {\n    key: \"onChangeSubTot\",\n    value: function onChangeSubTot(e) {\n      this.setState({\n        subtot: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeCustomerName\",\n    value: function onChangeCustomerName(e) {\n      this.setState({\n        customer_name: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeAddress\",\n    value: function onChangeAddress(e) {\n      this.setState({\n        address: e.target.value\n      });\n    } //adding items to item list\n\n  }, {\n    key: \"addItem\",\n    value: function addItem() {\n      var _this6 = this;\n\n      var new_item_obj = {\n        item_name: this.state.item_name,\n        quantity: this.state.quantity,\n        unit_value: this.state.unit_value,\n        subtot: this.state.subtot\n      };\n      this.setState({\n        item_number: this.state.item_number + 1,\n        item_set: this.state.item_set.concat(new_item_obj),\n        grand_total: this.state.grand_total + this.state.subtot,\n        item_name: '',\n        quantity: 0.0,\n        unit_value: 0.0,\n        subtot: 0.0\n      }, function () {\n        return console.log(_this6.state.item_set);\n      });\n    } //removing item\n\n  }, {\n    key: \"removeItem\",\n    value: function removeItem(item) {\n      var itemArray = _toConsumableArray(this.state.item_set); // make a separate copy of the array\n\n\n      var index = itemArray.indexOf(item);\n\n      if (index !== -1) {\n        itemArray.splice(index, 1);\n        this.setState({\n          item_set: itemArray,\n          grand_total: this.state.grand_total - item.subtot\n        });\n      } // this.setState({\n      //   item_number : this.state.item_number+1,\n      //   item_set : this.state.item_set.concat(new_item_obj),\n      //   grand_total:this.state.grand_total+this.state.subtot,\n      //   item_name : '',\n      //   quantity : 0.0,\n      //   unit_value : 0.0,\n      //   subtot : 0.0\n      // });   \n\n    } //alerting function\n\n  }, {\n    key: \"alertAndTimeout\",\n    value: function alertAndTimeout(type, message) {\n      var _this7 = this;\n\n      this.setState({\n        alerting: true,\n        alert_type: type,\n        alert_message: message\n      }, function () {\n        return setTimeout(function () {\n          this.setState({\n            alerting: false,\n            alert_type: \"\",\n            alert_message: \"\"\n          });\n        }.bind(_this7), 5000);\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var grandtot = 0.00;\n      this.state.item_set.map(function (item) {\n        grandtot += item.subtot;\n      });\n      this.setState({\n        grand_total: grandtot\n      });\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      var _this8 = this;\n\n      e.preventDefault();\n      var obj = {\n        order_name: this.state.order_name,\n        items: this.state.item_set,\n        grand_total: this.state.grand_total,\n        customer_name: this.state.customer_name,\n        address: this.state.address\n      };\n      var id = this.props.order._id;\n\n      if (this.state.user_data === null) {\n        this.props.history.push('/login');\n      } else {\n        var access_token = this.state.user_data.orderapp_user_token;\n        var UpdateOrder = {\n          method: 'post',\n          headers: {\n            Authorization: \"Bearer \" + access_token\n          },\n          data: [obj, id],\n          url: config.ServerAddress + '/order/update'\n        };\n        axios(UpdateOrder).then(function (response) {\n          if (response.data.message === \"sessionExpired\") {\n            _this8.props.handleLogout();\n\n            _this8.props.history.push('/login');\n          } else {\n            if (response.data.message === \"order_update_successfull\") {\n              _this8.setState({\n                customer_name: response.data.order.customer_name,\n                order_name: response.data.order.order_name,\n                item_set: response.data.order.items,\n                address: response.data.order.address,\n                grand_total: response.data.order.grand_total\n              }, function () {\n                return _this8.alertAndTimeout(\"success\", \"Order Updated Succefully !\");\n              });\n            } else if (response.data === \"order_update_fail\") {\n              _this8.alertAndTimeout(\"danger\", \"Update Failed !\");\n            } else if (response.data === \"order_not_found\") {\n              _this8.alertAndTimeout(\"danger\", \"Order Not Found !\");\n            }\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this9 = this;\n\n      if (this.state.user_data === null || this.state.user_data === undefined) {\n        this.props.history.push('/login');\n      }\n\n      var successful_alert = React.createElement(\"div\", {\n        className: \"row \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"alert alert-\" + this.state.alert_type,\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, this.state.alert_message)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }));\n      return React.createElement(\"div\", {\n        style: {\n          marginTop: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, this.state.alerting && this.state.alert_type && successful_alert, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, \"Update Order\"), React.createElement(\"form\", {\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, \"Order Name:  \"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.order_name,\n        onChange: this.onChangeOrderName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, \"Items:\"), React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        className: \"col-l-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"td\", {\n        className: \"col-l-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, \"Quantity\"), React.createElement(\"td\", {\n        className: \"col-l-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, \"Unit Price $\"), React.createElement(\"td\", {\n        className: \"col-l-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, \"Sub Total\"), React.createElement(\"td\", {\n        className: \"col-l-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, this.state.item_set.map(function (item) {\n        return React.createElement(\"tr\", {\n          key: item._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 304\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 305\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          name: \"name-\".concat(_this9.props.index),\n          value: item.item_name,\n          onChange: _this9.onChangeExistItemName.bind(_this9, item),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 306\n          },\n          __self: this\n        })), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"number\",\n          className: \"form-control\",\n          name: \"quantity-\".concat(_this9.props.index),\n          value: item.quantity,\n          onChange: _this9.onChangeExistQuantity.bind(_this9, item),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 309\n          },\n          __self: this\n        })), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 311\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"number\",\n          className: \"form-control\",\n          name: \"unitvalue-\".concat(_this9.props.index),\n          value: item.unit_value,\n          onChange: _this9.onChangeExistUnitValue.bind(_this9, item),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 312\n          },\n          __self: this\n        })), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 314\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          name: \"subtot-\".concat(_this9.props.index),\n          readOnly: true,\n          value: item.subtot,\n          onChange: _this9.onChangeSubTot,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 315\n          },\n          __self: this\n        })), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 317\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"button\",\n          className: \"close\",\n          onClick: _this9.removeItem.bind(_this9, item),\n          \"aria-label\": \"Close\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 318\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          \"aria-hidden\": \"true\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 319\n          },\n          __self: this\n        }, \"\\xD7\"))));\n      }), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      })), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        name: \"name-\".concat(this.props.index),\n        value: this.state.item_name,\n        onChange: this.onChangeItemName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        name: \"quantity-\".concat(this.props.index),\n        value: this.state.quantity,\n        onChange: this.onChangeQuantity,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        name: \"unitvalue-\".concat(this.props.index),\n        value: this.state.unit_value,\n        onChange: this.onChangeUnitValue,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        name: \"subtot-\".concat(this.props.index),\n        readOnly: true,\n        value: this.state.subtot,\n        onChange: this.onChangeSubTot,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-success\",\n        onClick: this.addItem,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, \"Add\")))))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, \"Total\"), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350\n        },\n        __self: this\n      }, this.state.grand_total)), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, \"Customer Name: \"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.customer_name,\n        onChange: this.onChangeCustomerName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, \"Address: \"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.address,\n        onChange: this.onChangeAddress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Update Order\",\n        className: \" btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return OrderDetailView;\n}(Component);\n\nexport { OrderDetailView as default };","map":{"version":3,"sources":["/home/malshanw/Documents/ColaProjects/orderapp/application/src/components/orderDetailView.component.jsx"],"names":["React","Component","axios","config","require","OrderDetailView","props","onChangeOrderName","e","setState","order_name","target","value","bind","onChangeItemName","onChangeQuantity","onChangeUnitValue","onChangeCustomerName","onChangeAddress","addItem","alertAndTimeout","onSubmit","state","order","item_name","address","customer_name","grand_total","quantity","unit_value","subtot","item_set","items","item_number","new_item_obj","user_data","alert_type","alert_message","alerting","temporyGrandTot","i","length","item","itemArray","index","indexOf","calculateGrandTotal","concat","console","log","splice","type","message","setTimeout","grandtot","map","preventDefault","obj","id","_id","history","push","access_token","orderapp_user_token","UpdateOrder","method","headers","Authorization","data","url","ServerAddress","then","response","handleLogout","catch","error","undefined","successful_alert","marginTop","onChangeExistItemName","onChangeExistQuantity","onChangeExistUnitValue","onChangeSubTot","removeItem"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nconst config = require('../config.json');\n\nexport default class OrderDetailView extends Component {\n  constructor(props) {\n    super(props);\n    \n    this.onChangeOrderName = this.onChangeOrderName.bind(this);\n    this.onChangeItemName = this.onChangeItemName.bind(this);    \n    this.onChangeQuantity = this.onChangeQuantity.bind(this);\n    this.onChangeUnitValue = this.onChangeUnitValue.bind(this);\n    this.onChangeCustomerName = this.onChangeCustomerName.bind(this);\n    this.onChangeAddress = this.onChangeAddress.bind(this);\n    this.addItem = this.addItem.bind(this);\n    this.alertAndTimeout = this.alertAndTimeout.bind(this);  \n    this.onSubmit = this.onSubmit.bind(this);\n\n    this.state = {\n      order_name: this.props.order.order_name,\n      item_name: '',\n      address:this.props.order.address,\n      customer_name:this.props.order.customer_name,\n      grand_total:0.00,\n      quantity:0.0,\n      unit_value:0.0,\n      subtot:0.0,\n      item_set:this.props.order.items,\n      item_number:0,\n      new_item_obj:{},\n      user_data : this.props.user_data,\n      alert_type:\"\",\n      alert_message:\"\",\n      alerting : false\n    }\n  }\n\n\n  calculateGrandTotal(){\n    let temporyGrandTot = 0.0;\n    \n    for(let i = 0;i<this.state.item_set.length;i++){\n      temporyGrandTot+=this.state.item_set[i].subtot;   \n    }\n    this.setState({grand_total:temporyGrandTot});\n  }\n\n\n  //on change input handlers\n  onChangeOrderName = (e)=> {\n    this.setState({order_name: e.target.value});\n  };\n  onChangeExistItemName(item,e) {\n    \n    let itemArray = [...this.state.item_set]; // make a separate copy of the array\n    let index = itemArray.indexOf(item)\n    \n    if (index !== -1) {\n      itemArray[index].item_name=e.target.value;\n      this.setState({ item_set: itemArray});\n    }\n  \n  }\n  onChangeItemName(e) {\n\n    this.setState({item_name: e.target.value});\n  \n  }\n\n\n  onChangeQuantity(e) {  \n    this.setState({quantity: e.target.value,},()=>this.setState({\n      subtot:this.state.unit_value * this.state.quantity\n    }));\n  }\n  onChangeExistQuantity(item,e) {\n\n    let itemArray = [...this.state.item_set]; // make a separate copy of the array\n    let index = itemArray.indexOf(item)\n    \n    if (index !== -1) {\n      itemArray[index].quantity = e.target.value;\n      itemArray[index].subtot = (itemArray[index].quantity)*(itemArray[index].unit_value);\n\n      this.setState({ item_set: itemArray},()=>this.calculateGrandTotal());\n    }\n\n  }\n\n  \n  onChangeUnitValue(e) {\n    this.setState({\n      unit_value: e.target.value,\n      subtot:this.state.unit_value * this.state.quantity\n    },()=>this.setState({\n      subtot:this.state.unit_value * this.state.quantity\n    }));\n  }\n  onChangeExistUnitValue(item,e) {\n    \n    \n    let itemArray = [...this.state.item_set]; // make a separate copy of the array\n    let index = itemArray.indexOf(item)\n    \n    if (index !== -1) {\n      itemArray[index].unit_value = e.target.value;\n      itemArray[index].subtot = (itemArray[index].quantity)*(itemArray[index].unit_value);\n\n      this.setState({ item_set: itemArray,},()=>this.calculateGrandTotal());\n    }\n    \n  }\n\n\n  onChangeSubTot(e) {\n    this.setState({subtot: e.target.value});\n  }\n  \n  onChangeCustomerName(e) {\n    this.setState({customer_name: e.target.value});\n  }\n  onChangeAddress(e){\n    this.setState({ address:e.target.value});\n  }\n\n  //adding items to item list\n  addItem(){\n    \n    const new_item_obj={\n      item_name:this.state.item_name,\n      quantity:this.state.quantity,\n      unit_value:this.state.unit_value,\n      subtot:this.state.subtot\n    };\n    this.setState({\n      item_number : this.state.item_number+1,\n      item_set : this.state.item_set.concat(new_item_obj),\n      grand_total:this.state.grand_total+this.state.subtot,\n      item_name : '',\n      quantity : 0.0,\n      unit_value : 0.0,\n      subtot : 0.0\n    },()=>console.log(this.state.item_set));   \n  }\n\n  //removing item\n  removeItem(item){\n    \n\n    let itemArray = [...this.state.item_set]; // make a separate copy of the array\n    let index = itemArray.indexOf(item)\n    \n  if (index !== -1) {\n    itemArray.splice(index, 1);\n    this.setState({\n      item_set: itemArray,\n      grand_total : this.state.grand_total-item.subtot\n    });\n  }\n  \n    \n    // this.setState({\n    //   item_number : this.state.item_number+1,\n    //   item_set : this.state.item_set.concat(new_item_obj),\n    //   grand_total:this.state.grand_total+this.state.subtot,\n    //   item_name : '',\n    //   quantity : 0.0,\n    //   unit_value : 0.0,\n    //   subtot : 0.0\n    // });   \n  }\n\n  \n\n  //alerting function\n  alertAndTimeout(type,message){\n\n    this.setState({\n      alerting : true,\n      alert_type:type,\n      alert_message:message\n    },()=>setTimeout(\n      function() {\n          this.setState({\n            alerting: false,\n            alert_type:\"\",\n            alert_message:\"\"\n          });\n      }\n      .bind(this),\n      5000\n    ));\n  }\n\n  componentDidMount(){\n    let grandtot = 0.00;\n    this.state.item_set.map((item)=>\n    {grandtot+=item.subtot});\n    this.setState({grand_total:grandtot});\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const obj = {\n      order_name: this.state.order_name,\n      items: this.state.item_set,\n      grand_total: this.state.grand_total,\n      customer_name : this.state.customer_name,\n      address : this.state.address\n    };\n    let id = this.props.order._id;\n    \n    if(this.state.user_data===null){\n\n      this.props.history.push('/login');\n    \n    }else{\n      const access_token = this.state.user_data.orderapp_user_token;\n      const UpdateOrder = {\n        method: 'post',\n        headers: { Authorization: \"Bearer \" + access_token },\n        data:[obj,id],\n        url:config.ServerAddress+'/order/update',\n      };\n\n      axios(UpdateOrder).then(response => {\n        if(response.data.message===\"sessionExpired\"){\n          this.props.handleLogout(); \n          this.props.history.push('/login');\n\n        }else{\n          if(response.data.message===\"order_update_successfull\"){\n\n            this.setState({\n              customer_name: response.data.order.customer_name,\n              order_name: response.data.order.order_name,\n              item_set: response.data.order.items,\n              address:response.data.order.address,\n              grand_total:response.data.order.grand_total\n            },()=>this.alertAndTimeout(\"success\",\"Order Updated Succefully !\"));\n\n          }else if(response.data===\"order_update_fail\"){\n\n            this.alertAndTimeout(\"danger\",\"Update Failed !\");\n\n          }else if(response.data===\"order_not_found\"){\n\n            this.alertAndTimeout(\"danger\",\"Order Not Found !\");\n\n          }\n\n        }   \n      }).catch(function (error) {\n        console.log(error);\n      })\n    }\n\n  }\n \n  render() {\n    \n    \n    if(this.state.user_data===null || this.state.user_data===undefined){\n      this.props.history.push('/login');\n    }\n\n    var successful_alert = \n      <div className=\"row \">\n        <div className=\"col-sm\"></div>\n        <div className=\"col-sm\">\n          <div className={\"alert alert-\"+this.state.alert_type} role=\"alert\">\n            {this.state.alert_message}\n          </div>\n        </div>\n        <div className=\"col-sm\"></div>\n      </div>\n    \n    return (\n      \n        <div style={{ marginTop: 10 }}>\n          {this.state.alerting && this.state.alert_type && successful_alert}\n          <h3>Update Order</h3>\n          <form onSubmit={this.onSubmit}>\n            <div className=\"form-group\">\n              <label>Order Name:  </label>\n                <input type=\"text\" className=\"form-control\" value={this.state.order_name} onChange={this.onChangeOrderName}  />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Items:</label>\n                <table>\n                  <thead>\n                  <tr>\n                    <td className=\"col-l-2\">Name</td>\n                    <td className=\"col-l-2\">Quantity</td>\n                    <td className=\"col-l-2\">Unit Price $</td>\n                    <td className=\"col-l-2\">Sub Total</td>\n                    <td className=\"col-l-2\"></td>\n                    </tr>\n                  </thead>\n                  <tbody>\n                  {this.state.item_set.map((item)=>\n                  <tr key={item._id}>\n                    <td>\n                      <input type=\"text\" className=\"form-control\" name={ `name-${ this.props.index }` } value={item.item_name} onChange={this.onChangeExistItemName.bind(this,item)} />\n                    </td>\n                    <td>\n                      <input type=\"number\" className=\"form-control\" name={ `quantity-${ this.props.index }` } value={item.quantity} onChange={this.onChangeExistQuantity.bind(this,item)} />\n                    </td>\n                    <td>\n                      <input type=\"number\" className=\"form-control\" name={ `unitvalue-${ this.props.index }` } value={item.unit_value} onChange={this.onChangeExistUnitValue.bind(this,item)} />\n                    </td>\n                    <td>\n                      <input type=\"text\" className=\"form-control\" name={ `subtot-${ this.props.index }` } readOnly value={item.subtot} onChange={this.onChangeSubTot}/>\n                    </td>\n                    <td>\n                      <button type=\"button\" className=\"close\" onClick={this.removeItem.bind(this,item)} aria-label=\"Close\">\n                        <span aria-hidden=\"true\">&times;</span>\n                      </button>\n                    </td>\n                  </tr>)}\n\n                  <tr>\n                    <td></td>\n                  </tr>\n                  <tr>\n                    <td>\n                      <input type=\"text\" className=\"form-control\" name={ `name-${ this.props.index }` } value={this.state.item_name} onChange={this.onChangeItemName} />\n                    </td>\n                    <td>\n                      <input type=\"number\" className=\"form-control\" name={ `quantity-${ this.props.index }` } value={this.state.quantity} onChange={this.onChangeQuantity} />\n                    </td>\n                    <td>\n                      <input type=\"number\" className=\"form-control\" name={ `unitvalue-${ this.props.index }` } value={this.state.unit_value} onChange={this.onChangeUnitValue} />\n                    </td>\n                    <td>\n                      <input type=\"text\" className=\"form-control\" name={ `subtot-${ this.props.index }` } readOnly value={this.state.subtot} onChange={this.onChangeSubTot}/>\n                    </td>\n                    <td>\n                      <button type=\"button\" className=\"btn btn-success\" onClick={this.addItem} >Add</button>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n            <div className=\"form-group\">\n              <h3>Total</h3>\n              <label>{this.state.grand_total}</label>\n            </div>\n\n            <div className=\"form-group\">\n              <label>Customer Name: </label>\n              <input type=\"text\" className=\"form-control\" value={this.state.customer_name} onChange={this.onChangeCustomerName} />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Address: </label>\n              <input type=\"text\" className=\"form-control\" value={this.state.address} onChange={this.onChangeAddress} />\n            </div>\n                \n            <div className=\"form-group\">\n              <input type=\"submit\" value=\"Update Order\" className=\" btn btn-primary\"/>\n            </div>\n          </form>\n        </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}